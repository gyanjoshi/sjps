<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>

<!-- Basic Page Needs
    ================================================== -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Ghodaghodi Campus - Research Department</title>

<!-- Mobile Specific Metas
    ================================================== -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Favicon -->
<link rel="shortcut icon" type="image/icon"
	th:href="@{/img/logo-gmc.png}" />



<!-- CSS
    ================================================== -->

<!-- Google fonts -->
<link href='http://fonts.googleapis.com/css?family=Merriweather'
	rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Varela'
	rel='stylesheet' type='text/css'>

<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
<link rel="stylesheet" th:href="@{/css/normalize.css}">
<link rel="stylesheet" th:href="@{/css/fontawesome-all.css}">
<link rel="stylesheet" th:href="@{/css/font-awesome.min.css}">
<link rel="stylesheet" th:href="@{/css/linearicons.css}">
<link rel="stylesheet" th:href="@{/css/themify-icons.css}">
<link rel="stylesheet" th:href="@{/css/scrollbar.css}">
<link rel="stylesheet" th:href="@{/css/owl.carousel.css}">
<link rel="stylesheet" th:href="@{/css/chartist.css}">
<link th:href="@{/main.css}" rel="stylesheet">
<link rel="stylesheet" th:href="@{/css/dashboard.css}">
<link rel="stylesheet" th:href="@{/css/color.css}">
<link rel="stylesheet" th:href="@{/css/transitions.css}">

<link rel="stylesheet" th:href="@{/css/responsive.css}">

<!-- Latest compiled and minified CSS -->
<link defer rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta/dist/css/bootstrap-select.min.css">





<script th:src="@{/js/modernizr-2.8.3-respond-1.4.2.min.js}"
	type="text/javascript"></script>

<script type="text/javascript" th:src="@{/ckeditor/ckeditor.js}"></script>




</head>
<body class="sj-home">
	<!--************************************
				Preloader Start
	*************************************-->
	<div class="preloader-outer">
		<div class='loader'>
			<div class='loader--dot'></div>
			<div class='loader--dot'></div>
			<div class='loader--dot'></div>
			<div class='loader--dot'></div>
		</div>
	</div>
	<!--************************************
				Preloader End
	*************************************-->
	<div id="sj-wrapper" class="sj-wrapper">
		<div class="sj-contentwrapper">

			<!--=========== BEGIN HEADER SECTION ================-->


			<div th:replace="/fragments/headerlayout :: newheader"></div>


			<!--   =========== END HEADER SECTION ================-->

			<div class="sj-innerbanner">
				<div class="container">
					<div class="row">
						<div class="col-12 col-sm-12 col-md-12 col-lg-12">
							<div class="sj-innerbannercontent">
								<h1>Editor Dashboard</h1>
								<ol class="sj-breadcrumb">
									<li><a href="javascript:void(0);">Home</a></li>
									<li><a href="javascript:void(0);">Journal Issues</a></li>
								</ol>
							</div>
						</div>
					</div>
				</div>
			</div>

			<main id="sj-main" class="sj-main sj-haslayout sj-sectionspace">
			<div class="container">
				<div class="row">
					<div id="sj-twocolumns" class="sj-twocolumns">
						<div
							class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-3 float-left">
							<div th:replace="/fragments/headerlayout :: editorsidebar"></div>
						</div>
						<div
							class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-9 float-right">

							<div id="sj-content" class="sj-content sj-addarticleholdcontent">
								<div class="sj-dashboardboxtitle">
									<h2>Journal Issues</h2>
									<a type="button" th:href="@{/editor/newissue}"  class="sj-btn sj-btnactive float-right">Create New Issue</a>
								</div>
								<div class="sj-addarticlehold">
									<p class="alert alert-success" th:if="${message}" th:text="${message}" />
									<p class="alert alert-danger" th:if="${errormessage}" th:text="${errormessage}" />
										
									<ul class="nav nav-tabs" id="myTab" role="tablist">
										<li class="nav-item" style="list-style: inherit"><a
											class="nav-link active" id="future-tab" data-toggle="tab"
											href="#future" role="tab" aria-controls="myqueue"
											aria-selected="true">Future Issues <span th:if="${futureissues.size()>0}" th:text="${futureissues.size()}"
												class="badge badge-danger"></span></a></li>
										<li class="nav-item" style="list-style: inherit"><a
											class="nav-link" id="back-tab" data-toggle="tab"
											href="#back" role="tab" aria-controls="back"
											aria-selected="false">Back Issues <span th:if="${backissues.size()>0}" th:text="${backissues.size()}"
												class="badge badge-warning"></span></a></li>										
									</ul>
									
									<div class="tab-content" id="myTabContent">
										<div class="tab-pane fade show active" id="future"	role="tabpanel" aria-labelledby="future-tab">
											<th:block th:if="${futureissues.size()>0}">
											<div class="sj-dashboardboxtitle sj-titlewithform">												
												
												<form class="sj-formtheme sj-formsearchvtwo" action="">
													<div class="sj-sortupdown">
														<a href="javascript:void(0);"><i
															class="fa fa-sort-amount-up"></i></a>
													</div>
													<fieldset>
														<input type="search" name="search" class="form-control"
															placeholder="Search here">
														<button type="submit" class="sj-btnsearch">
															<i class="lnr lnr-magnifier"></i>
														</button>
													</fieldset>
												</form>
											</div>
											<ul id="accordion-future" class="sj-articledetails sj-articledetailsvtwo">
												<th:block th:each="issue, issueStat : ${futureissues}">
													<li th:id="${'heading-future-'+issueStat.index}" class="sj-articleheader">
														<div class="sj-detailstime">													
															<div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-6 float-left">
																<img th:if="*{coverimages.get(issue.journalIssueId) != null}"  th:src="@{'data:image/jpg;base64,' + *{T(org.springframework.util.Base64Utils).encodeToString(coverimages.get(issue.journalIssueId))}}" />
															</div>
															<div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-6 float-right">
																<div class="sj-head">
																	<h4 th:text="${issue.JournalTopic}"></h4>
																		<span th:text="${issue.getPublishInfo()}"><i class="ti-calendar"></i></span>
																		<span th:text="${'Status: '+issue.status}"><i class="ti-calendar"></i></span>
																		<span th:text="${'Number of Items: '+issue.numItems}"><i class="ti-calendar"></i></span>
																</div>
																<div class="sj-userbtnarea">
																
																
																<a type="button" th:href="@{/editor/editjournalissue(jiid=${issue.journalIssueId})}"  class="sj-btn sj-btnactive mb-3">Update Info</a>
																<a th:href="@{/editor/editjournalissuecover(jiid=${issue.journalIssueId})}"  class="sj-btn mb-3">Update Cover</a>
																<a th:href="@{/editor/publishissue-preview(jiid=${issue.journalIssueId})}"  class="sj-btn mb-3">Publish Issue</a>
																<button th:if="${issue.status!='Published'}" type="button" class="btn btn-danger mb-3"
																	data-toggle="modal" data-target="#myModal" th:attr="data-target='#myModal'+${issue.journalIssueId}">Delete</button>
																<div class="modal fade" th:id="myModal+${issue.journalIssueId}">
																	<!-- The Modal -->
																	<div class="modal-dialog">
																		<div class="modal-content">
						
																			<!-- Modal Header -->
																			<div class="modal-header">
																				<h4 class="modal-title">Are you sure?</h4>
																				<button type="button" class="close" data-dismiss="modal">&times;</button>
																			</div>
						
																			<!-- Modal footer -->
																			<div class="modal-footer">
																				<button type="button" class="btn btn-danger"
																					data-dismiss="modal">Close</button>
																				<a th:href="@{/editor/deletejournalissue(jid=${issue.journalIssueId})}">
																				<button type="button" class="btn btn-success">Yes</button>
																				</a>
																			</div>
																		</div>
																	</div>
																</div>
																</div>
															</div>
														</div>											
													</li>
												</th:block>
											</ul>
										</div>
										<div class="tab-pane fade" id="back" role="tabpanel" aria-labelledby="back-tab">
											<th:block th:if="${backissues.size()>0}">
											<div class="sj-dashboardboxtitle sj-titlewithform">
												<h2>Back Issues</h2>
												<form class="sj-formtheme sj-formsearchvtwo" action="">
													<div class="sj-sortupdown">
														<a href="javascript:void(0);"><i
															class="fa fa-sort-amount-up"></i></a>
													</div>
													<fieldset>
														<input type="search" name="search" class="form-control"
															placeholder="Search here">
														<button type="submit" class="sj-btnsearch">
															<i class="lnr lnr-magnifier"></i>
														</button>
													</fieldset>
												</form>
											</div>											
											<ul id="accordion-back" class="sj-articledetails sj-articledetailsvtwo">
												<th:block th:each="issue, issueStat : ${backissues}">
													<li th:id="${'heading-back-'+issueStat.index}" class="sj-articleheader">
														<div class="sj-detailstime">													
															<div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-6 float-left">
																<img th:if="*{coverimages.get(issue.journalIssueId) != null}"  th:src="@{'data:image/jpg;base64,' + *{T(org.springframework.util.Base64Utils).encodeToString(coverimages.get(issue.journalIssueId))}}" />
															</div>
															<div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xl-6 float-right">
																<div class="sj-head">
																	<h4 th:text="${issue.JournalTopic}"></h4>
																		<span th:text="${issue.getPublishInfo()}"><i class="ti-calendar"></i></span>
																		<span th:text="${'Status: '+issue.status}"><i class="ti-calendar"></i></span>
																		<span th:text="${'Number of Items: '+issue.numItems}"><i class="ti-calendar"></i></span>
																</div>
																<a type="button" th:href="@{/editor/editjournalissue(jiid=${issue.journalIssueId})}"  class="sj-btn sj-btnactive">Update Info</a>
																<a th:href="@{/editor/editjournalissuecover(jiid=${issue.journalIssueId})}"  class="sj-btn">Update Cover</a>
															</div>
														</div>											
													</li>
												</th:block>
											</ul>
											</th:block>
										</div>
									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
			</main>

			<!--=========== BEGIN FOOTER SECTION ================-->


			<div th:replace="/fragments/headerlayout :: footer"></div>

			<!--=========== END FOOTER SECTION ================-->
		</div>
	</div>


	<!-- Javascript Files
    ================================================== -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.0.4/popper.js"
		type="text/javascript"></script>
	<script th:src="@{/js/jquery-3.3.1.js}" type="text/javascript"></script>
	<script th:src="@{/js/jquery-library.js}" type="text/javascript"></script>
	<script th:src="@{/js/bootstrap.min.js}" type="text/javascript"></script>
	<script th:src="@{/js/owl.carousel.min.js}" type="text/javascript"></script>
	<script th:src="@{/js/circle-progress.js}" type="text/javascript"></script>
	<script th:src="@{/js/scrollbar.min.js}" type="text/javascript"></script>
	<script th:src="@{/js/chartist.min.js}" type="text/javascript"></script>
	<script th:src="@{/js/countdown.js}" type="text/javascript"></script>
	<script th:src="@{/js/appear.js}" type="text/javascript"></script>
	<script th:src="@{/main.js}" type="text/javascript"></script>

	<!-- Latest compiled and minified JavaScript -->
	<script defer
		src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta/dist/js/bootstrap-select.min.js"
		type="text/javascript"></script>

</body>


</html>